<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="jQuery.1.0.2.js"></script>
    <!-- <script src="./../jquery.js"></script> -->
</head>

<body>

</body>

</html>
<script>
    // Promise/A+规范 or Deferred
    // Promise作为一个模型，提供了一个在软件工程中描述延时(或将来)概念的解决方案
    // Promise表示一个异步操作的最终结果
    // 与Promise最主要的交互方法是，通过将函数传入它的then方法，从而获取得Promise最终的值或Promise最终拒绝(reject)的原因
    // 一个Promise必须处于以下状态的其中之一：pedding,fulfilled或rejected
    // 一个Promise必须提供一个then方法来获得其值或原因
    // 而Deferred是这种规范的具体实现

    // Deferred API
    // jQuery.Deferred()
    // 一个构造函数，返回一个链式实用对象方法来注册多个回调，回调队列，调用回调队列，并转达任何同步或异步函数的成功或失败状态
    // deferred.done()
    // 当Deferred(延迟)对象解决时，调用添加处理程序
    // deferred.fail()
    // 当Deferred(延迟)对象拒绝时，调用添加处理程序
    // deferred.progress()
    // 当Deferred(延迟)对象生成进度通知时，调用(已)添加的处理程序。
    // jQuery.when()
    // 提供一种方法来执行一个或多个对象的回调函数，Deferred(延迟)对象通常表示异步事件。
    // .promise()
    // 返回一个Promise对象用来观察当某种类型的所有行动绑定到集合，排队与否还是已经完成。

    var wait = function () {
        var der = $.Deferred(); // 延迟对象
        var test = function () {
            console.log('老司机开车了');
            der.resolve("vcincent"); // 成功 队列中的处理函数
        }
        setTimeout(test, 20);
        return der;
    }

    // 延迟对象的状态 决定调用哪个队列中的处理函数
    // promise对象promise.done() self.add
    $.when(wait())     // promise对象promise.done()   self.add
        .done(function (name) {
            console.log(name)
            console.log("执行成功");
        })
        .fail(function () {
            console.log("执行失败");
        });

        /*
        var cbs =  $.callbacks();   //队列        //  var list = tuple[2], jQuery.callbacks("once memory")
		cbs.add(function(){   //添加处理函数    //promise.done()  promise.fail()
		
		});
		cbs.fire();  //执行队列中的处理函数      //der.resolve("max"); 		
        */
    
        var fn = function () {
                var count = 1;
                console.log(count);
            }
            var uniq = function () {
                var count = 2;
                console.log(count)
            }
            fn() || uniq();
</script>